<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quản lý Tin tức - LunarSMP</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body{font-family:'Press Start 2P', cursive; background:#0a0c19; color:#fff; padding:22px;}
h1{color:#ffcc00; margin-bottom:16px;}
textarea{width:100%; height:320px; padding:12px; border-radius:12px; border:none; resize:none; background:#121428; color:#eaeaf7;}
button{margin-top:14px; padding:14px 22px; background:#ffcc00; color:#000; border:none; cursor:pointer; font-weight:bold; border-radius:12px;}
button:hover{background:#ffd633;}
.box{max-width:900px; margin:0 auto; background:rgba(255,255,255,0.06); border:1px solid rgba(255,204,0,0.25); border-radius:18px; padding:18px;}
.note{opacity:0.85; font-size:0.85em; margin-top:10px;}
</style>
</head>
<body>
<div class="box">
<h1>Quản lý Tin tức LunarSMP</h1>
<textarea id="newsContent" placeholder="Nhập mỗi tin 1 dòng"></textarea>
<br>
<button onclick="saveNews()">Lưu tin tức</button>
<p class="note">Gợi ý: mỗi dòng là một tin. Sau khi bấm lưu, mở trang chính để xem.</p>
</div>

<script>
async function saveNews(){
  const content=document.getElementById('newsContent').value.split('\n').filter(n=>n.trim()!=='');
  try{
    const res=await fetch('/api/news',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({news:content})});
    alert(await res.text());
  }catch(e){ alert('Lưu thất bại'); }
}

async function loadAdminNews(){
  try{
    const res=await fetch('/api/news');
    const news=await res.json();
    document.getElementById('newsContent').value=news.join('\n');
  }catch(e){ document.getElementById('newsContent').value=''; }
}
loadAdminNews();
</script>
</body>
</html>
